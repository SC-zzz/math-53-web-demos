<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width">
  <title>Chapter 2 Demo</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.js"></script>

  <!-- Fonts -->
  <script src="https://use.fontawesome.com/6af5d1a69f.js" async></script>

 <!-- Including Math -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.3/math.js"></script>

  <!-- Including MathJax -->
  <script>
  MathJax = {
    tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
  };
  </script>
  <script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Including Plotly -->
  <script>
  window.PlotlyConfig = {MathJaxConfig: 'local'}
  </script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <style>
#container {
  width: 400px;
  height: 400px;
  position: relative;
  background: white;
}
#animate {
  width: 50px;
  height: 50px;
  position: absolute;
  background: red;
}

.range-wrap {
  position: relative;
  margin: 0 auto 2.5rem 4rem;
}
.range {
  width: 100%;
}
.bubble {
  background: dodgerblue;
  color: white;
  padding: 4px 12px;
  position: absolute;
  border-radius: 4px;
  left: 50%;
  transform: translateX(-50%);
}

.bubble::after {
  content: "";
  position: absolute;
  width: 2px;
  height: 2px;
  background: dodgerblue;
  top: -1px;
  left: 50%;
}
</style>
</head>



<body>


<nav>
<a href="index_page.html">back to index page</a> | 
<a href="index_page.html">previous page</a> | 
<a href="index_page.html">next page</a>
</nav>



<article>

  <header>
    <h1>Chapter 2 Demo</h1>  

<div>
<h3>Visualizing a certain first-order autonomous ODE.</h3>
</div>

<p>Here we visualize the solutions to the autonomous ODE</p>
<p>
    \begin{align}
    Y' +AY = B,
    \end{align}
  </p>
<p>  with constants $A ,B$ ($A \ne 0$). </p>

<p> To see the visualization, choose values for the constants  $A$, $B$ and choose the intial condition  $Y(0)=Y_0$ at time  $t=0$:</p>


<div class="range-wrap" style="width: 40%;">
  <label for="A">$A$: </label>
  <input id = "A" type="range" class="range" min="-2" max="2" step = 0.12>
  <output class="bubble"></output>
</div>
<div class="range-wrap" style="width: 40%;">
  <label for="B">$B$: </label>
  <input id = "B" type="range" class="range" min="-5" max="5" step = 0.5 value = "-5">
  <output class="bubble"></output>
</div>
<div class="range-wrap" style="width: 40%;">
  <label for="Y0">$Y_0$: </label>
  <input id = "Y0" type="range" class="range" min="-5" max="5" step = 0.5>
  <output class="bubble"></output>
</div>

  
<script src="js/auxiliary.js"></script>
<div id="myPlot" style="width:100%;max-width:700px">
  <script>
function draw()   {
var A = parseFloat(document.getElementById("A").value);  
var B = parseFloat(document.getElementById("B").value);
var Y0 = parseFloat(document.getElementById("Y0").value); 
const xArray = math.range(0, 5, 0.05).toArray();
const yArray = xArray.map(function (x) {
        return math.evaluate('(Y0 - B/A)*exp(-A*x)+B/A', {x: x, A:A, B:B, Y0:Y0})
           })
//var y = (Y0 - B/A)*NumJs.exp(-A*xArray)+B/A;
//var yArray = y.tolist();
// Define Data
var data = [{
  x:xArray,
  y:yArray,
  mode:"lines"
}];

// Define Layout
var layout = {
  xaxis: {range: [0, 5], title: "time t"},
  yaxis: {title: "Y"},  
  title: "The solution curve Y(t) (with A="+ A + ", B=" + B + ", Y0=" + Y0 + ")"
};

// Display using Plotly
Plotly.newPlot("myPlot", data, layout);
}

document.getElementById('A').onsubmit = function (event) {
    draw()
  }
document.getElementById('B').onsubmit = function (event) {
    draw()
  }
document.getElementById('Y0').onsubmit = function (event) {
    draw()
  } 

    </script></div>



<script src="js/draw_bubble.js"></script>
</body>

</html>